!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash"),require("moment")):"function"==typeof define&&define.amd?define(["lodash","moment"],e):t.ActiveApi=e(t._,t.moment)}(this,function(t,e){"use strict";function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}function o(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=h(e),this.reject=h(r)}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var i=Math.ceil,c=Math.floor,u=function(t){return isNaN(t=+t)?0:(t>0?c:i)(t)},a=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},s=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),f=n(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),h=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},p=function(t,e,r){if(h(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},v=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},y=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=s.document,g=l(m)&&l(m.createElement),w=function(t){return g?m.createElement(t):{}},_=!y&&!d(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a}),x=function(t,e){if(!l(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!l(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!l(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,E={f:y?Object.defineProperty:function(t,e,r){if(v(t),e=x(e,!0),v(r),_)try{return b(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},P=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=y?function(t,e,r){return E.f(t,e,P(1,r))}:function(t,e,r){return t[e]=r,t},j=function(t,e,r){var n,o,i,c=t&j.F,u=t&j.G,a=t&j.S,h=t&j.P,l=t&j.B,v=t&j.W,d=u?f:f[e]||(f[e]={}),y=d.prototype,m=u?s:a?s[e]:(s[e]||{}).prototype;u&&(r=e);for(n in r)(o=!c&&m&&void 0!==m[n])&&n in d||(i=o?m[n]:r[n],d[n]=u&&"function"!=typeof m[n]?r[n]:l&&o?p(i,s):v&&m[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):h&&"function"==typeof i?p(Function.call,i):i,h&&((d.virtual||(d.virtual={}))[n]=i,t&j.R&&y&&!y[n]&&O(y,n,i)))};j.F=1,j.G=2,j.S=4,j.P=8,j.B=16,j.W=32,j.U=64,j.R=128;var k=j,S=O,T={}.hasOwnProperty,L=function(t,e){return T.call(t,e)},A={},R={}.toString,M=function(t){return R.call(t).slice(8,-1)},C=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==M(t)?t.split(""):Object(t)},F=function(t){return C(a(t))},I=Math.min,U=function(t){return t>0?I(u(t),9007199254740991):0},G=Math.max,N=Math.min,D=function(t,e){return(t=u(t))<0?G(t+e,0):N(t,e)},V=s["__core-js_shared__"]||(s["__core-js_shared__"]={}),K=function(t){return V[t]||(V[t]={})},B=0,W=Math.random(),q=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++B+W).toString(36))},H=K("keys"),z=function(t){return H[t]||(H[t]=q(t))},Q=function(t){return function(e,r,n){var o,i=F(e),c=U(i.length),u=D(n,c);if(t&&r!=r){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}}(!1),Y=z("IE_PROTO"),Z=function(t,e){var r,n=F(t),o=0,i=[];for(r in n)r!=Y&&L(n,r)&&i.push(r);for(;e.length>o;)L(n,r=e[o++])&&(~Q(i,r)||i.push(r));return i},$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=Object.keys||function(t){return Z(t,$)},X=y?Object.defineProperties:function(t,e){v(t);for(var r,n=J(e),o=n.length,i=0;o>i;)E.f(t,r=n[i++],e[r]);return t},tt=s.document,et=tt&&tt.documentElement,rt=z("IE_PROTO"),nt=function(){},ot=function(){var t,e=w("iframe"),r=$.length;for(e.style.display="none",et.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ot=t.F;r--;)delete ot.prototype[$[r]];return ot()},it=Object.create||function(t,e){var r;return null!==t?(nt.prototype=v(t),r=new nt,nt.prototype=null,r[rt]=t):r=ot(),void 0===e?r:X(r,e)},ct=n(function(t){var e=K("wks"),r=s.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:q)("Symbol."+t))}).store=e}),ut=E.f,at=ct("toStringTag"),st=function(t,e,r){t&&!L(t=r?t:t.prototype,at)&&ut(t,at,{configurable:!0,value:e})},ft={};O(ft,ct("iterator"),function(){return this});var ht=function(t,e,r){t.prototype=it(ft,{next:P(1,r)}),st(t,e+" Iterator")},pt=function(t){return Object(a(t))},lt=z("IE_PROTO"),vt=Object.prototype,dt=Object.getPrototypeOf||function(t){return t=pt(t),L(t,lt)?t[lt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?vt:null},yt=ct("iterator"),mt=!([].keys&&"next"in[].keys()),gt=function(){return this},wt=function(t,e,r,n,o,i,c){ht(r,e,n);var u,a,s,f=function(t){if(!mt&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},h=e+" Iterator",p="values"==o,l=!1,v=t.prototype,d=v[yt]||v["@@iterator"]||o&&v[o],y=d||f(o),m=o?p?f("entries"):y:void 0,g="Array"==e?v.entries||d:d;if(g&&(s=dt(g.call(new t)))!==Object.prototype&&s.next&&st(s,h,!0),p&&d&&"values"!==d.name&&(l=!0,y=function(){return d.call(this)}),c&&(mt||l||!v[yt])&&O(v,yt,y),A[e]=y,A[h]=gt,o)if(u={values:p?y:f("values"),keys:i?y:f("keys"),entries:m},c)for(a in u)a in v||S(v,a,u[a]);else k(k.P+k.F*(mt||l),e,u);return u},_t=function(t){return function(e,r){var n,o,i=String(a(e)),c=u(r),s=i.length;return c<0||c>=s?t?"":void 0:(n=i.charCodeAt(c))<55296||n>56319||c+1===s||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):n:t?i.slice(c,c+2):o-56320+(n-55296<<10)+65536}}(!0);wt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=_t(e,r),this._i+=t.length,{value:t,done:!1})});var xt=function(){},bt=function(t,e){return{value:e,done:!!t}};wt(Array,"Array",function(t,e){this._t=F(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,bt(1)):"keys"==e?bt(0,r):"values"==e?bt(0,t[r]):bt(0,[r,t[r]])},"values");A.Arguments=A.Array,xt(),xt(),xt();for(var Et=ct("toStringTag"),Pt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ot=0;Ot<Pt.length;Ot++){var jt=Pt[Ot],kt=s[jt],St=kt&&kt.prototype;St&&!St[Et]&&O(St,Et,jt),A[jt]=A.Array}var Tt,Lt,At,Rt=ct("toStringTag"),Mt="Arguments"==M(function(){return arguments}()),Ct=function(t,e){try{return t[e]}catch(t){}},Ft=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=Ct(e=Object(t),Rt))?r:Mt?M(e):"Object"==(n=M(e))&&"function"==typeof e.callee?"Arguments":n},It=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t},Ut=function(t,e,r,n){try{return n?e(v(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&v(o.call(t)),e}},Gt=ct("iterator"),Nt=Array.prototype,Dt=function(t){return void 0!==t&&(A.Array===t||Nt[Gt]===t)},Vt=ct("iterator"),Kt=f.getIteratorMethod=function(t){if(void 0!=t)return t[Vt]||t["@@iterator"]||A[Ft(t)]},Bt=n(function(t){var e={},r={},n=t.exports=function(t,n,o,i,c){var u,a,s,f,h=c?function(){return t}:Kt(t),l=p(o,i,n?2:1),d=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(Dt(h)){for(u=U(t.length);u>d;d++)if((f=n?l(v(a=t[d])[0],a[1]):l(t[d]))===e||f===r)return f}else for(s=h.call(t);!(a=s.next()).done;)if((f=Ut(s,l,a.value,n))===e||f===r)return f};n.BREAK=e,n.RETURN=r}),Wt=ct("species"),qt=function(t,e){var r,n=v(t).constructor;return void 0===n||void 0==(r=v(n)[Wt])?e:h(r)},Ht=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)},zt=s.process,Qt=s.setImmediate,Yt=s.clearImmediate,Zt=s.MessageChannel,$t=s.Dispatch,Jt=0,Xt={},te=function(){var t=+this;if(Xt.hasOwnProperty(t)){var e=Xt[t];delete Xt[t],e()}},ee=function(t){te.call(t.data)};Qt&&Yt||(Qt=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return Xt[++Jt]=function(){Ht("function"==typeof t?t:Function(t),e)},Tt(Jt),Jt},Yt=function(t){delete Xt[t]},"process"==M(zt)?Tt=function(t){zt.nextTick(p(te,t,1))}:$t&&$t.now?Tt=function(t){$t.now(p(te,t,1))}:Zt?(At=(Lt=new Zt).port2,Lt.port1.onmessage=ee,Tt=p(At.postMessage,At,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(Tt=function(t){s.postMessage(t+"","*")},s.addEventListener("message",ee,!1)):Tt="onreadystatechange"in w("script")?function(t){et.appendChild(w("script")).onreadystatechange=function(){et.removeChild(this),te.call(t)}}:function(t){setTimeout(p(te,t,1),0)});var re={set:Qt,clear:Yt},ne=re.set,oe=s.MutationObserver||s.WebKitMutationObserver,ie=s.process,ce=s.Promise,ue="process"==M(ie),ae={f:function(t){return new o(t)}},se=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},fe=function(t,e){if(v(t),l(e)&&e.constructor===t)return e;var r=ae.f(t);return(0,r.resolve)(e),r.promise},he=ct("species"),pe=ct("iterator"),le=!1;try{[7][pe]().return=function(){le=!0}}catch(t){}var ve,de,ye,me,ge=re.set,we=function(){var t,e,r,n=function(){var n,o;for(ue&&(n=ie.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(ue)r=function(){ie.nextTick(n)};else if(oe){var o=!0,i=document.createTextNode("");new oe(n).observe(i,{characterData:!0}),r=function(){i.data=o=!o}}else if(ce&&ce.resolve){var c=ce.resolve();r=function(){c.then(n)}}else r=function(){ne.call(s,n)};return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}(),_e=s.TypeError,xe=s.process,be=s.Promise,Ee="process"==Ft(xe),Pe=function(){},Oe=de=ae.f,je=!!function(){try{var t=be.resolve(1),e=(t.constructor={})[ct("species")]=function(t){t(Pe,Pe)};return(Ee||"function"==typeof PromiseRejectionEvent)&&t.then(Pe)instanceof e}catch(t){}}(),ke=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},Se=function(t,e){if(!t._n){t._n=!0;var r=t._c;we(function(){for(var n=t._v,o=1==t._s,i=0;r.length>i;)!function(e){var r,i,c=o?e.ok:e.fail,u=e.resolve,a=e.reject,s=e.domain;try{c?(o||(2==t._h&&Ae(t),t._h=1),!0===c?r=n:(s&&s.enter(),r=c(n),s&&s.exit()),r===e.promise?a(_e("Promise-chain cycle")):(i=ke(r))?i.call(r,u,a):u(r)):a(n)}catch(t){a(t)}}(r[i++]);t._c=[],t._n=!1,e&&!t._h&&Te(t)})}},Te=function(t){ge.call(s,function(){var e,r,n,o=t._v,i=Le(t);if(i&&(e=se(function(){Ee?xe.emit("unhandledRejection",o,t):(r=s.onunhandledrejection)?r({promise:t,reason:o}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=Ee||Le(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},Le=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if((e=r[n++]).fail||!Le(e.promise))return!1;return!0},Ae=function(t){ge.call(s,function(){var e;Ee?xe.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},Re=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Se(e,!0))},Me=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _e("Promise can't be resolved itself");(e=ke(t))?we(function(){var n={_w:r,_d:!1};try{e.call(t,p(Me,n,1),p(Re,n,1))}catch(t){Re.call(n,t)}}):(r._v=t,r._s=1,Se(r,!1))}catch(t){Re.call({_w:r,_d:!1},t)}}};je||(be=function(t){It(this,be,"Promise","_h"),h(t),ve.call(this);try{t(p(Me,this,1),p(Re,this,1))}catch(t){Re.call(this,t)}},(ve=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:O(t,n,e[n]);return t}(be.prototype,{then:function(t,e){var r=Oe(qt(this,be));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ee?xe.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Se(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),ye=function(){var t=new ve;this.promise=t,this.resolve=p(Me,t,1),this.reject=p(Re,t,1)},ae.f=Oe=function(t){return t===be||t===me?new ye(t):de(t)}),k(k.G+k.W+k.F*!je,{Promise:be}),st(be,"Promise"),function(t){var e="function"==typeof f[t]?f[t]:s[t];y&&e&&!e[he]&&E.f(e,he,{configurable:!0,get:function(){return this}})}("Promise"),me=f.Promise,k(k.S+k.F*!je,"Promise",{reject:function(t){var e=Oe(this);return(0,e.reject)(t),e.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(t){return fe(this===me?be:this,t)}}),k(k.S+k.F*!(je&&function(t,e){if(!e&&!le)return!1;var r=!1;try{var n=[7],o=n[pe]();o.next=function(){return{done:r=!0}},n[pe]=function(){return o},t(n)}catch(t){}return r}(function(t){be.all(t).catch(Pe)})),"Promise",{all:function(t){var e=this,r=Oe(e),n=r.resolve,o=r.reject,i=se(function(){var r=[],i=0,c=1;Bt(t,!1,function(t){var u=i++,a=!1;r.push(void 0),c++,e.resolve(t).then(function(t){a||(a=!0,r[u]=t,--c||n(r))},o)}),--c||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=Oe(e),n=r.reject,o=se(function(){Bt(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}}),k(k.P+k.R,"Promise",{finally:function(t){var e=qt(this,f.Promise||s.Promise),r="function"==typeof t;return this.then(r?function(r){return fe(e,t()).then(function(){return r})}:t,r?function(r){return fe(e,t()).then(function(){throw r})}:t)}}),k(k.S,"Promise",{try:function(t){var e=ae.f(this),r=se(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}});var Ce=f.Promise,Fe=n(function(t){t.exports={default:Ce,__esModule:!0}}),Ie=r(Fe),Ue=n(function(t){!function(e){function r(t,e,r,n){var i=e&&e.prototype instanceof o?e:o,c=Object.create(i.prototype),u=new l(n||[]);return c._invoke=s(t,r,u),c}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function c(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function a(t){function e(r,o,i,c){var u=n(t[r],t,o);if("throw"!==u.type){var a=u.arg,s=a.value;return s&&"object"==typeof s&&g.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,c)},function(t){e("throw",t,i,c)}):Promise.resolve(s).then(function(t){a.value=t,i(a)},c)}c(u.arg)}var r;this._invoke=function(t,n){function o(){return new Promise(function(r,o){e(t,n,r,o)})}return r=r?r.then(o,o):o()}}function s(t,e,r){var o=P;return function(i,c){if(o===j)throw new Error("Generator is already running");if(o===k){if("throw"===i)throw c;return d()}for(r.method=i,r.arg=c;;){var u=r.delegate;if(u){var a=f(u,r);if(a){if(a===S)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===P)throw o=k,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=j;var s=n(t,e,r);if("normal"===s.type){if(o=r.done?k:O,s.arg===S)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=k,r.method="throw",r.arg=s.arg)}}}function f(t,e){var r=t.iterator[e.method];if(r===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,f(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var o=n(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,S;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,S):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function l(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(g.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=y,e.done=!0,e};return n.next=n}}return{next:d}}function d(){return{value:y,done:!0}}var y,m=Object.prototype,g=m.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",b=w.toStringTag||"@@toStringTag",E=e.regeneratorRuntime;if(E)t.exports=E;else{(E=e.regeneratorRuntime=t.exports).wrap=r;var P="suspendedStart",O="suspendedYield",j="executing",k="completed",S={},T={};T[_]=function(){return this};var L=Object.getPrototypeOf,A=L&&L(L(v([])));A&&A!==m&&g.call(A,_)&&(T=A);var R=c.prototype=o.prototype=Object.create(T);i.prototype=R.constructor=c,c.constructor=i,c[b]=i.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(R),t},E.awrap=function(t){return{__await:t}},u(a.prototype),a.prototype[x]=function(){return this},E.AsyncIterator=a,E.async=function(t,e,n,o){var i=new a(r(t,e,n,o));return E.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},u(R),R[b]="Generator",R[_]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=v,l.prototype={constructor:l,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=y),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var c=g.call(o,"catchLoc"),u=g.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,S):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),p(r),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;p(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:v(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=y),S}}}}(function(){return this}()||Function("return this")())}),Ge=function(){return this}()||Function("return this")(),Ne=Ge.regeneratorRuntime&&Object.getOwnPropertyNames(Ge).indexOf("regeneratorRuntime")>=0,De=Ne&&Ge.regeneratorRuntime;Ge.regeneratorRuntime=void 0;var Ve=Ue;if(Ne)Ge.regeneratorRuntime=De;else try{delete Ge.regeneratorRuntime}catch(t){Ge.regeneratorRuntime=void 0}var Ke=Ve,Be=r(n(function(t,e){e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(Fe);e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){function o(i,c){try{var u=e[i](c),a=u.value}catch(t){return void n(t)}if(!u.done)return r.default.resolve(a).then(function(t){o("next",t)},function(t){o("throw",t)});t(a)}return o("next")})}}})),We={success:function(){return 0},error:function(){return 0}},qe={create:function(e){var r=e.alertService||We;return{success:function(n){return t.each(e.dependents,function(t){t.SessionCache.forceExpire(),t.Alert.success(e.feed,n)}),r.success(e.feed,n)},error:function(t,n){return r.error(e.feed,t,n)}}},GET:"GET",CREATE:"CREATE",REMOVE:"REMOVE",UPDATE:"UPDATE"},He=e("1986-08-13:00:00Z"),ze={create:function(r){function n(t){return f[t]}function o(e,r){return u(s()),t.isArray(r)?c(e,r):i(e,r)}function i(e,r){return f[e]||(f[e]={}),t.assign(f[e],r),f[e]}function c(e,n){f[e]||(f[e]=[]);var o=r.keyBy||"id",c=t.map(n,function(t){return i(t[o],t)});t.assign(f[e],c)}function u(t){h=t}function a(){return h}function s(){var n=r.sessionExpiration;if(!n)return e().add(1,"year");if("alwaysExpired"===n)return e().subtract(1,"year");var o=t.split(n," ");return e().add(Number(o[0]),o[1])}var f={},h=He;return{get:n,set:o,setArray:c,setObject:i,remove:function(e){delete f[e],t.forOwn(f,function(r,n){t.isArray(r)&&(f[n]=t.reject(r,function(r){return t.isEqual(t.toString(r.id),t.toString(e))}))})},unshift:function(t,e){var r=n(t)||[];return o(t,[e].concat(r))},push:function(t,e){return o(t,(n(t)||[]).push(e))},forceExpire:function(){u(He)},isExpired:function(){return e().isAfter(a())},expirationTime:a,masterCache:f,setExpiration:u,_getDefaultExpiration:s}}},Qe={f:Object.getOwnPropertySymbols},Ye={f:{}.propertyIsEnumerable},Ze=Object.assign,$e=!Ze||d(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=Ze({},t)[r]||Object.keys(Ze({},e)).join("")!=n})?function(t,e){for(var r=pt(t),n=arguments.length,o=1,i=Qe.f,c=Ye.f;n>o;)for(var u,a=C(arguments[o++]),s=i?J(a).concat(i(a)):J(a),f=s.length,h=0;f>h;)c.call(a,u=s[h++])&&(r[u]=a[u]);return r}:Ze;k(k.S+k.F,"Object",{assign:$e});var Je=f.Object.assign,Xe=n(function(t){t.exports={default:Je,__esModule:!0}});r(Xe);var tr=r(n(function(t,e){e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(Xe);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}})),er={create:function(){function e(e,n){n?delete t.get(r,e,{})[n]:delete r[e]}var r={};return{get:function(e,n){return t.get(r,[e,n])},set:function(e,n,o,i){var c={path:o,value:i};c.promise=new Ie(function(t,e){c.resolve=t,c.reject=e}),t.set(r,[e,n],c)},remove:e,getPromise:function(e,n){return t.get(r,[e,n,"promise"])},resolvePromise:function(n,o){t.get(r,[n,o,"resolve"],function(){return 0})(),e(n,o)},rejectPromise:function(e,n){t.get(r,[e,n,"reject"],function(){return 0})()},getCleanedQueue:function(){return t.mapValues(r,function(e){return t.mapValues(e,function(e){return t.omit(e,["promise","resolve","reject"])})})}}}},rr={get:function(){var t=Be(Ke.mark(function t(){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}(),create:function(){var t=Be(Ke.mark(function t(e,r){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r);case 1:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}(),post:function(){var t=Be(Ke.mark(function t(e,r){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r);case 1:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}(),patch:function(){var t=Be(Ke.mark(function t(e,r){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r);case 1:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}(),remove:function(){var t=Be(Ke.mark(function t(){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()},nr={create:function(e){function r(t,e,r,n){h.set(t,e,r,n)}function n(t,e){h.resolvePromise(t,e)}var o=function(){var t=Be(Ke.mark(function t(e){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.get(e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Be(Ke.mark(function t(e,o,i){var c;return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i&&r(i,"create",e,o),t.prev=1,t.next=4,f.post(e,o);case 4:return c=t.sent,n(i,"create"),t.abrupt("return",c);case 9:throw t.prev=9,t.t0=t.catch(1),h.rejectPromise(i,"create"),t.t0;case 13:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,r,n){return t.apply(this,arguments)}}(),c=function(){var t=Be(Ke.mark(function t(e,o,i){var c;return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(i,"post",e,o),t.next=3,h.getPromise(i,"create");case 3:return p.flush(),t.next=6,h.getPromise(i,"update");case 6:return t.prev=6,t.next=9,f.post(e,o);case 9:return c=t.sent,n(i,"post"),t.abrupt("return",c);case 14:throw t.prev=14,t.t0=t.catch(6),h.rejectPromise(i,"post"),t.t0;case 18:case"end":return t.stop()}},t,this,[[6,14]])}));return function(e,r,n){return t.apply(this,arguments)}}(),u=function(){var e=Be(Ke.mark(function e(n,o,i){var c,u,a;return Ke.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=h.get(i,"update"),u=t.get(c,"value",{}),a=tr({},u,o),r(i,"update",n,a),e.prev=4,p(i,n,a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(4),e.t0;case 11:case"end":return e.stop()}},e,this,[[4,8]])}));return function(t,r,n){return e.apply(this,arguments)}}(),a=function(){var t=Be(Ke.mark(function t(e,o){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(o,"remove",e),t.next=3,h.getPromise(o,"create");case 3:return p.flush(),t.next=6,h.getPromise(o,"update");case 6:return t.next=8,h.getPromise(o,"post");case 8:return t.prev=8,t.next=11,f.delete(e);case 11:n(o,"remove"),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(8),t.t0;case 17:case"end":return t.stop()}},t,this,[[8,14]])}));return function(e,r){return t.apply(this,arguments)}}(),s=function(){var t=Be(Ke.mark(function t(e,r,o){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getPromise(e,"create");case 2:return t.prev=2,t.next=5,f.patch(r,o);case 5:n(e,"update"),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),h.rejectPromise(e,"update"),t.t0;case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e,r,n){return t.apply(this,arguments)}}();if(e.isOffline)return rr;var f=e.api,h=er.create(),p=t.debounce(s,e.patchDebounceTime||3e3);return{get:o,create:i,post:c,patch:u,remove:a}}},or=/(?::[a-z]\w*\/?)\s*/gi,ir={removeParamsFromUrl:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(or,"");return t.trimEnd(e,"/")},replaceUrlParamsWith:function(e,r){var n=e;return t.each(r,function(t,e){n=n.replace(":"+e,t)}),this.removeParamsFromUrl(n)},removeParamsThatMatchUrl:function(e,r){var n=this;return t.omitBy(r,function(t,r){return n.isParamInUrl(e,r)})},isParamInUrl:function(e,r){var n=t.escapeRegExp(r);return new RegExp("/:"+n+"(/|(\\s*$))").test(e)},serializeParams:function(e){return t(e).keys().sortBy().map(function(t){return t+"="+e[t]}).value().join("&")}};return{create:function(r){var n=function(){var t=Be(Ke.mark(function t(e){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetch(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),o=function(){var e=Be(Ke.mark(function e(r,n){var o,i,c,u,a;return Ke.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.create(r,n);case 2:return o=e.sent,e.next=5,this._transformResponse(o);case 5:return i=e.sent,c=f.get(i.id),u=t.merge(i,c),a=this._constructKey(),f.unshift(a,u),e.abrupt("return",i);case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var t=Be(Ke.mark(function t(e,r,n){var o,i,c,u,a;return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=this._constructUrl({id:r}),i=o+"/"+e,t.prev=2,t.next=5,p.post(i,n,r);case 5:return c=t.sent,t.next=8,this._transformResponse(c);case 8:return u=t.sent,a=f.set(u.id,u),h.success(qe.ACTION),t.abrupt("return",a);case 14:throw t.prev=14,t.t0=t.catch(2),h.error(qe.ACTION,t.t0),t.t0;case 18:case"end":return t.stop()}},t,this,[[2,14]])}));return function(e,r,n){return t.apply(this,arguments)}}(),c=function(){var t=Be(Ke.mark(function t(e){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._constructKey(e),!f.get(r)){t.next=5;break}if((n=f.isExpired())||o.forceRefresh){t.next=5;break}return t.abrupt("return",f.get(r));case 5:return t.next=7,this._fetch(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),u=function(){var r=Be(Ke.mark(function r(){var n,o,i,c;return Ke.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=this._constructKey({since:v.toISOString()}),v=e(),r.next=4,p.get(n);case 4:if(o=r.sent,!t.isEmpty(o)){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,this._transformResponse(o);case 9:i=r.sent,c=this._constructKey(),f.update(c,i),h.success(qe.GET);case 13:case"end":return r.stop()}},r,this)}));return function(){return r.apply(this,arguments)}}(),a=function(){var e=Be(Ke.mark(function e(){var n,o,i,c,u,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ke.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._constructUrl(a),!r.forceGetAll){e.next=6;break}if(o=this._constructKey(),t.isEmpty(f.get(o))){e.next=5;break}return e.abrupt("return");case 5:n=this._constructUrl();case 6:if(!l[n]){e.next=8;break}return e.abrupt("return");case 8:return l[n]=!0,e.prev=9,e.next=12,p.get(n);case 12:return i=e.sent,e.next=15,this._transformResponse(i);case 15:return c=e.sent,u=this._constructKey(a),r.forceGetAll&&a.id&&(u=this._constructKey()),f.set(u,c),h.success(qe.GET),e.abrupt("return",i);case 23:throw e.prev=23,e.t0=e.catch(9),h.error(qe.GET,e.t0),e.t0;case 27:return e.prev=27,l[n]=!1,e.finish(27);case 30:case"end":return e.stop()}},e,this,[[9,23,27,30]])}));return function(){return e.apply(this,arguments)}}(),s=function(){var t=Be(Ke.mark(function t(e){return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.transformResponse){t.next=2;break}return t.abrupt("return",e);case 2:return t.abrupt("return",r.transformResponse(e));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),f=ze.create(r),h=qe.create(r),p=nr.create(r),l={},v=e();t.set(r,"dependents",[]);var d={isAvailable:function(t){var e=t?{id:t}:void 0;this._fetchIfExpired(e);var r=this._constructKey(e);return!!f.get(r)},isExpired:function(){return f.isExpired()},get:function(t,e){if(r.getReturnPromise)return this._fetchIfExpired(t,e);this._fetchIfExpired(t,e);var n=this._constructKey(t);return f.get(n)},getById:function(t){if(t)return this.get({id:t})},refresh:n,create:function(e){var n=this,o=this._constructUrl();return t.isArray(e)&&r.isOffline?(f.set(o,e),f.get(o)):e.id?(f.set(e.id,e),this._doCreate(o,e),h.success(qe.CREATE),f.get(e.id)):new Ie(function(){var t=Be(Ke.mark(function t(r,i){var c;return Ke.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n._doCreate(o,e);case 3:c=t.sent,r(c),h.success(qe.CREATE),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),h.error(qe.CREATE,t.t0),i(t.t0);case 12:case"end":return t.stop()}},t,n,[[0,8]])}));return function(e,r){return t.apply(this,arguments)}}())},update:function(t,e){var r=this._constructUrl({id:t});try{p.patch(r,e,t).catch(function(t){throw t}),f.setObject(t,e),h.success(qe.UPDATE)}catch(t){throw h.error(qe.UPDATE,t),t}},remove:function(t){var e=this._constructUrl({id:t});try{f.remove(t),h.success(qe.REMOVE),p.remove(e,t).catch(function(t){throw t})}catch(t){throw h.error(qe.REMOVE,t),t}},action:i,dependents:r.dependents,_transformResponse:s,_fetchIfExpired:c,_fetch:a,_doCreate:o,_doPollingFetch:u,_constructKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 1===t.keys(e).length&&e.id?e.id:this._constructUrl(e)},_constructUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=ir.replaceUrlParamsWith(r.url,t),n=ir.removeParamsFromUrl(e),o=ir.removeParamsThatMatchUrl(t),i=ir.serializeParams(o);return i?n+"?"+i:n},SessionCache:f,Alert:h,ApiQueue:p,get _masterCache(){return f.masterCache}};return t.each(r.dependencies,function(t){t.dependents.push(d)}),function(n){if(r.pollingTime){var o=t.split(r.pollingTime," "),i=e.duration(Number(o[0]),o[1]).asMilliseconds();setInterval(function(){n._doPollingFetch()},i)}}(d),d}}});
//# sourceMappingURL=ActiveApi.min.js.map
